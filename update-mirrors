#!/bin/sh

# Eventually moving everything to this section
for i in phpweb; do
    cd /local/repos/$i
    git fetch origin && git reset --hard origin/master
    git submodule update
    rsync -qrltDvzC --exclude=".git" /local/repos/$i/ /local/mirrors/$i
done

for i in systems doc-editor docweb php-wiki php-rmtools php-people-web qaweb php-gcov-web php-master-web php-news-web php-bugs-web talks talks/presentations php-gtk-web php-gtk-doc; do
    cd /local/mirrors/$i
    git fetch origin && git reset --hard origin/master;
    git submodule update --init
done

# special case for peclweb because master is b0rked
cd /local/mirrors/peclweb;
git fetch origin && git reset --hard origin/old_auth;

# Systems scripts were dropped down a level at some point.
cd /local/systems;
git fetch origin && git reset --hard origin/master;
